!function(w){function C(t){return"left"===t||"center"===t||"right"===t}function b(t){return"number"==typeof t&&!isNaN(t)}w.fn.extend({fakeSelect:function(t,e){var u=this,c=150,f="center",v=w.extend({columns:[],data:[],valueId:null,url:null,method:"post",queryParams:{}},t),h=[],p=[],l=0,i=document.body.clientWidth,d=u.offset().left,m=w("<div>"),s=w("<div>"),g=w("<div>");function o(t){for(var e=v.data,a=[],n=0;n<e.length;n++)for(var r=e[n],l=0;l<h.length;l++){var i=x(r,h[l]);if(i&&-1!=i.search(t)){a.push(r);break}}return a}function y(t){for(var e=0;e<t.length;e++){var a=t[e],n=w("<div>");n.bind("mousedown",{index:p,val:a},function(t){var e,a,n,r;e=t.data.index,a=t.data.val,n=function(){if(v.valueId)for(var t=0;t<h.length;t++)if(h[t]===v.valueId)return!0;return!1}()?v.valueId:h[0],r=x(a,n),u.val(r),v.onClickRow(e,a)}),n.addClass("itemClass");for(var r=0;r<v.columns.length;r++){var l=v.columns[r],i=v.columns[r].field,d=w("<div>");d.addClass("fakeSelect-item-Con"),d.addClass("column-"+p+"-"+r+"-"+l.field);var s=b(l.width)?l.width:c;d.css("width",s+"px");var o=C(l.align)?l.align:f;d.css("text-align",o),d.attr("name",i),d.text(x(a,i)),n.append(d)}p++,g.append(n),m.append(g)}}function x(t,e,a){var n=e.split("."),r=t[n.shift()];if(null==r)return r;if(0!=n.length)return x(r,n.join("."),a);if(!a)return r;var l=Object.prototype.toString.call(r).replace("[object ","").replace("]","");return!0===a?l:a?l==a:r}return u.focus(function(){var t;m.show(),u.val()&&(t=o(u.val()),g.html(""),y(t))}),u.blur(function(){m.hide()}),u.bind("input propertychange",function(){var t,e=v.data;u.val()?(t=o(u.val()),g.html(""),y(t)):(g.html(""),y(e))}),u.init=function(){m.addClass("fakeSelect-content"),g.addClass("fakeSelect-table"),s.addClass("fakeSelect-title");for(var t=0;t<v.columns.length;t++){var e=v.columns[t];h.push(e.field);var a=b(e.width)?e.width:c;l+=a;var n=w("<div>");n.addClass("fakeSelect-title-item"),n.addClass("title-"+t+"-"+e.field),n.text(e.title),n.css("width",a+"px");var r=C(e.align)?e.align:f;n.css("text-align",r),s.append(n)}m.append(s),v.url&&"string"==typeof v.url?w.ajax({type:v.method,url:v.url,data:v.queryParams,dataType:"json",success:function(t){y(t.rows)},error:function(t){console.error(t)}}):function(){var t=v.data;{var e;u.val()?(e=o(u.val()),g.html(""),y(e)):y(t)}}(),function(){{var t;m.css("width",l+20+"px"),i<d+l?(t=d-(d+l-i),m.css("left",t-40),m.append("<style>.fakeSelect-content::after{left:"+(l-u.outerWidth()+20)+"px}</style>")):m.css("left",d)}}(),u.after(m)},u.init(),u.setRowData=function(t){var e=[];Array.isArray(t)?e=t:e.push(t),y(e)},this}})}(jQuery);